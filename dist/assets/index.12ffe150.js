import{c as O,j as b,r as u,e as R,n as F,R as I,a as w}from"./vendor.2ce7c9b9.js";const L=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}};L();const g=(s,l)=>{localStorage.setItem(s,JSON.stringify(l))},h=O((s,l)=>({cards:[],addCards:a=>{s(o=>({cards:a})),g("CRC-cards",a)},getCardsFromLocalStorage:()=>{s(a=>({cards:JSON.parse(localStorage.getItem("CRC-cards"))||[]}))},addNewFieldToCard:(a,o,t)=>{const e=l().cards,r=e.findIndex(i=>i.id===a);t?e[r].resp.push(o):e[r].collab.push(o),s(i=>({cards:e})),g("CRC-cards",e)},updateName:(a,o)=>{s(t=>({cards:t.cards.map(e=>(e.id===o&&(e.name=a),e))})),g("CRC-cards",l().cards)},updateField:(a,o,t,e)=>{const r=l().cards,i=r.findIndex(p=>p.id===o);e?r[i].resp[t]=a:r[i].collab[t]=a,s(p=>({cards:r})),g("CRC-cards",r)},deleteField:(a,o,t)=>{const e=l().cards,r=e.findIndex(i=>i.id===a);t?e[r].resp.splice(o,1):e[r].collab.splice(o,1),s(i=>({cards:e})),g("CRC-cards",e)},deleteCard:a=>{s(o=>({cards:o.cards.filter(t=>t.id!==a)})),g("CRC-cards",l().cards)}}));const n=b.exports.jsx,f=b.exports.jsxs,D=b.exports.Fragment,J=({originalValue:s,closeModal:l,index:a,idCard:o,toResponsabilita:t,deleteFieldLocally:e})=>{const[r,i]=u.exports.useState(s),p=h(c=>c.updateField),v=h(c=>c.deleteField);return f("div",{className:"modal",children:[n("textarea",{value:r,onChange:c=>{i(c.target.value)},cols:40,rows:10}),n("button",{className:"saveBtn",onClick:()=>{p(r,o,a,t),l(r)},children:"Save"}),n("button",{className:"deleteBtnItem",onClick:()=>{v(o,a,t),e(a),l()},children:"Delete Item"})]})},x=({message:s,index:l,idCard:a,toResponsabilita:o})=>{const[t,e]=u.exports.useState(!1),[r,i]=u.exports.useState(s),p=u.exports.useRef(null);return f(D,{children:[n("div",{ref:p,className:"box",onClick:()=>e(!t),children:r}),t&&n(J,{originalValue:r,toResponsabilita:o,closeModal:m=>{e(!1),m&&i(m)},index:l,idCard:a,deleteFieldLocally:()=>{p.current.style="display:none"}})]})};const y=({saveCard:s,toResponsabilites:l})=>{const[a,o]=u.exports.useState("");return n("div",{className:"InputBox",children:f("form",{onSubmit:e=>{e.preventDefault(),a!==""&&(s(a,l),o(""))},children:[n("input",{type:"text",placeholder:`Aggiungi ${l?"Responsabilit\xE0":"Collaboratori"}`,onInput:e=>o(e.target.value),value:a}),n("input",{type:"submit",value:"+"})]})})},k=({card:s,index:l})=>{const[a,o]=u.exports.useState(s.name),[t,e]=u.exports.useState(!1),r=u.exports.useRef(null),i=h(c=>c.addNewFieldToCard),p=h(c=>c.updateName),v=h(c=>c.deleteCard),d=(c,C)=>{i(s.id,c,C),e(!t)};return u.exports.useEffect(()=>{p(a,s.id)},[a]),f("div",{ref:r,className:"CRCCard",children:[n("div",{onClick:()=>{v(s.id)},className:"deleteBtn",children:"X"}),n("input",{className:"nameOfTheClass",type:"text",value:a,onChange:c=>{o(c.target.value)}}),f("div",{className:"sections",children:[f("div",{className:"responsabilita",children:[s.resp.map((c,C)=>n(x,{message:c,index:C,idCard:s.id,toResponsabilita:!0},C)),n(y,{saveCard:d,toResponsabilites:!0})]}),f("div",{className:"collaboratori",children:[s.collab.map((c,C)=>n(x,{message:c,index:C,idCard:s.id,toResponsabilita:!1,deleteFieldLocally:N=>deleteFieldLocally(N,!1)},C)),n(y,{saveCard:d,toResponsabilites:!1})]})]})]})};function T(){const s=h(d=>d.cards),l=h(d=>d.addCards),a=h(d=>d.getCardsFromLocalStorage),[o,t]=u.exports.useState(!1),[e,r]=u.exports.useState("");return u.exports.useEffect(()=>{a()},[]),f("div",{className:"App",children:[f("div",{className:"buttons",children:[n("button",{className:"addCard",onClick:()=>{l([...s,{id:F(10),name:"Default",resp:[],collab:[]}])},children:"Add a card"}),n("button",{className:"exportCards",onClick:()=>{const d=JSON.stringify(s),m=new Date,[c,C,N]=[m.getHours(),m.getMinutes(),m.getSeconds()],S=document.createElement("a");S.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(d)),S.setAttribute("download",`data-${c}:${C}:${N}.json`),S.click(),S.remove()},children:"EXPORT"}),n("button",{className:"exportCards",onClick:()=>{t(!o)},children:"IMPORT"}),o&&f("div",{className:"importWindow",children:[n("textarea",{cols:40,rows:10,value:e,onChange:d=>r(d.target.value)}),n("button",{className:"importBtn",onClick:()=>{t(!1);try{const d=JSON.parse(e);if(typeof d!="object")throw new Error("JSON is not an array");if(!d.collab||!d.resp)throw new Error("Invalid JSON");l(d)}catch(d){R(d,{bandColor:"red",backgroundColor:"black",duration:5e3})}},children:"Confirm"})]})]}),n("br",{}),n("br",{}),n("div",{className:"cards",children:s.map((d,m)=>n(k,{index:m,card:d},d.id))})]})}I.render(n(w.StrictMode,{children:n(T,{})}),document.getElementById("root"));
